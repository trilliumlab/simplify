import 'package:platform_maps_flutter/platform_maps_flutter.dart';
import 'package:simplify/simplify.dart';
import 'package:test/test.dart';

const List<LatLng> points = [
  LatLng(224.55, 250.15),
  LatLng(226.91, 244.19),
  LatLng(233.31, 241.45),
  LatLng(234.98, 236.06),
  LatLng(244.21, 232.76),
  LatLng(262.59, 215.31),
  LatLng(267.76, 213.81),
  LatLng(273.57, 201.84),
  LatLng(273.12, 192.16),
  LatLng(277.62, 189.03),
  LatLng(280.36, 181.41),
  LatLng(286.51, 177.74),
  LatLng(292.41, 159.37),
  LatLng(296.91, 155.64),
  LatLng(314.95, 151.37),
  LatLng(319.75, 145.16),
  LatLng(330.33, 137.57),
  LatLng(341.48, 139.96),
  LatLng(369.98, 137.89),
  LatLng(387.39, 142.51),
  LatLng(391.28, 139.39),
  LatLng(409.52, 141.14),
  LatLng(414.82, 139.75),
  LatLng(427.72, 127.30),
  LatLng(439.60, 119.74),
  LatLng(474.93, 107.87),
  LatLng(486.51, 106.75),
  LatLng(489.20, 109.45),
  LatLng(493.79, 108.63),
  LatLng(504.74, 119.66),
  LatLng(512.96, 122.35),
  LatLng(518.63, 120.89),
  LatLng(524.09, 126.88),
  LatLng(529.57, 127.86),
  LatLng(534.21, 140.93),
  LatLng(539.27, 147.24),
  LatLng(567.69, 148.91),
  LatLng(575.25, 157.26),
  LatLng(580.62, 158.15),
  LatLng(601.53, 156.85),
  LatLng(617.74, 159.86),
  LatLng(622.00, 167.04),
  LatLng(629.55, 194.60),
  LatLng(638.90, 195.61),
  LatLng(641.26, 200.81),
  LatLng(651.77, 204.56),
  LatLng(671.55, 222.55),
  LatLng(683.68, 217.45),
  LatLng(695.25, 219.15),
  LatLng(700.64, 217.98),
  LatLng(703.12, 214.36),
  LatLng(712.26, 215.87),
  LatLng(721.49, 212.81),
  LatLng(727.81, 213.36),
  LatLng(729.98, 208.73),
  LatLng(735.32, 208.20),
  LatLng(739.94, 204.77),
  LatLng(769.98, 208.42),
  LatLng(779.60, 216.87),
  LatLng(784.20, 218.16),
  LatLng(800.24, 214.62),
  LatLng(810.53, 219.73),
  LatLng(817.19, 226.82),
  LatLng(820.77, 236.17),
  LatLng(827.23, 236.16),
  LatLng(829.89, 239.89),
  LatLng(851.00, 248.94),
  LatLng(859.88, 255.49),
  LatLng(865.21, 268.53),
  LatLng(857.95, 280.30),
  LatLng(865.48, 291.45),
  LatLng(866.81, 298.66),
  LatLng(864.68, 302.71),
  LatLng(867.79, 306.17),
  LatLng(859.87, 311.37),
  LatLng(860.08, 314.35),
  LatLng(858.29, 314.94),
  LatLng(858.10, 327.60),
  LatLng(854.54, 335.40),
  LatLng(860.92, 343.00),
  LatLng(856.43, 350.15),
  LatLng(851.42, 352.96),
  LatLng(849.84, 359.59),
  LatLng(854.56, 365.53),
  LatLng(849.74, 370.38),
  LatLng(844.09, 371.89),
  LatLng(844.75, 380.44),
  LatLng(841.52, 383.67),
  LatLng(839.57, 390.40),
  LatLng(845.59, 399.05),
  LatLng(848.40, 407.55),
  LatLng(843.71, 411.30),
  LatLng(844.09, 419.88),
  LatLng(839.51, 432.76),
  LatLng(841.33, 441.04),
  LatLng(847.62, 449.22),
  LatLng(847.16, 458.44),
  LatLng(851.38, 462.79),
  LatLng(853.97, 471.15),
  LatLng(866.36, 480.77),
];

const List<LatLng> simplified = [
  LatLng(224.55, 250.15),
  LatLng(267.76, 213.81),
  LatLng(296.91, 155.64),
  LatLng(330.33, 137.57),
  LatLng(409.52, 141.14),
  LatLng(439.60, 119.74),
  LatLng(486.51, 106.75),
  LatLng(529.57, 127.86),
  LatLng(539.27, 147.24),
  LatLng(617.74, 159.86),
  LatLng(629.55, 194.60),
  LatLng(671.55, 222.55),
  LatLng(727.81, 213.36),
  LatLng(739.94, 204.77),
  LatLng(769.98, 208.42),
  LatLng(779.60, 216.87),
  LatLng(800.24, 214.62),
  LatLng(820.77, 236.17),
  LatLng(859.88, 255.49),
  LatLng(865.21, 268.53),
  LatLng(857.95, 280.30),
  LatLng(867.79, 306.17),
  LatLng(859.87, 311.37),
  LatLng(854.54, 335.40),
  LatLng(860.92, 343.00),
  LatLng(849.84, 359.59),
  LatLng(854.56, 365.53),
  LatLng(844.09, 371.89),
  LatLng(839.57, 390.40),
  LatLng(848.40, 407.55),
  LatLng(839.51, 432.76),
  LatLng(853.97, 471.15),
  LatLng(866.36, 480.77)
];

void main() {
  test('simplifies points correctly with the given tolerance', () {
    final result = simplify(points, tolerance: 5);
    expect(result, equals(simplified));
  });

  test('just return the points if it has only one point', () {
    final result = simplify(const [LatLng(1, 2)]);
    expect(result, equals(const [LatLng(1, 2)]));
  });

  test('ust return the points if it has no points', () {
    final result = simplify(const <LatLng>[]);
    expect(result, equals(const []));
  });
}
